<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Framework | Testing all web components</title>
    <!-- <script src="//code.jquery.com/jquery-3.6.3.min.js" integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script> -->
    <link rel="stylesheet" type="text/css" href="css/semantic.min.css">
    
    <script src='./dist/fabric510.js'></script>
    <script src='./dist/js/vendor.js'></script>
    <link href="./dist/css/vendor.css" rel="stylesheet" type="text/css">
    <script src='js/FancyProductDesigner.js'></script>
    
    <style>
        
        body {
            font-size: 12px;
        }
        
        #fpd-target {
        }
        
    </style>
</head>
<body>
    
    <div class="fpd-tooltip" aria-label="hello" style="display: inline-block; position: fixed; right: 0; bottom: 0;">test</div>
    <div class="ui container">
        
        <div class="ui one column grid" style="padding-top: 20px;">
            
            <div class="column">
                
                    <div id="fpd-target" class="fpd-sidebar fpd-shadow-2 fpd-views-inside-left"></div>
                    <!-- <div id="fpd-target" class="fpd-off-canvas fpd-shadow-2 fpd-views-inside-right"></div> -->
                    <!-- <div id="fpd-target" class="fpd-topbar fpd-shadow-2 fpd-views-inside-right"></div> -->
            </div>
            
            <div class="column">
                <select id="main-layout" class="ui selection dropdown">
                    <option value="sidebar">Sidebar</option>
                    <option value="topbar">Topbar</option>
                    <option value="off-canvas">Off-Canvas</option>
                </select>
            </div>
            
            <div class="column">
                <h5>Test API</h5>
                <div id="test-api">
                    <button id="undo" class="ui button" data-tooltip="test">Undo</button>
                    <button id="redo" class="ui button">Redo</button>
                    <button id="test" class="ui button">Test</button>
                </div>
            </div>
            
        </div>
        <script>
            
            const appOptions = {
                langJson: 'data/langs/default.json',
                initialActiveModule: 'products',
                responsiveBreakpoints: {
                },
                mainBarModules: [
                    'products',
                    'images',
                    'text',
                    'text-to-image',
                    'designs',
                    'designs_love',
                    'manage-layers',
                    'text-layers',
                    'layouts',
                ],
                fonts: [
                    {name: 'Lobster', url: 'google'},
                    {name: 'Aller', url: 'fonts/Aller.ttf', variants: {
                            'n7': 'fonts/Aller__bold.ttf',
                            'i4': 'fonts/Aller__italic.ttf',
                            'i7': 'fonts/Aller__bolditalic.ttf'
                        }
                    },
                    {name: 'Pacifico', url: 'fonts/Pacifico.ttf'},
                ],
                productsJSON: './data/product-categories.json',
                designsJSON: 'data/designs/design-categories.json',
                textTemplates: [
                    {
                        text: "This is\nmy world",
                        properties: {
                            fontSize: 30,
                            fontFamily: "Lobster"
                        }
                    },
                    {
                        text: "This is my crazy world.",
                        properties: {
                            fontSize: 50,
                            fontFamily: "Lobster"
                        }
                    },
                    {
                        text: "This is\nmy world",
                        properties: {
                            fontSize: 30,
                            fontFamily: "Lobster"
                        }
                    },
                    {
                        text: "This is my crazy world.",
                        properties: {
                            fontSize: 50,
                            fontFamily: "Lobster"
                        }
                    },
                    {
                        text: "This is\nmy world",
                        properties: {
                            fontSize: 30,
                            fontFamily: "Lobster"
                        }
                    },
                    {
                        text: "This is my crazy world.",
                        properties: {
                            fontSize: 50,
                            fontFamily: "Lobster"
                        }
                    },
                    {
                        text: "This is\nmy world",
                        properties: {
                            fontSize: 30,
                            fontFamily: "Lobster"
                        }
                    },
                    {
                        text: "This is my crazy world.",
                        properties: {
                            fontSize: 50,
                            fontFamily: "Lobster"
                        }
                    }
                ],
                dynamicDesigns: {
                    "love": {
                        name: "Love",
                        icon: "https://dek8oqj8xxsl6.cloudfront.net/img/humans/silhouettes/silhouette_10.svg",
                        categories: ['love']
                    }
                },
                customImageAjaxSettings: {
                    url: 'https://radykal.dep/fpd-js/server/php/custom-image-handler.php',
                    data: {
                        saveOnServer: 1,
                        uploadsDir: '/Users/rady/htdocs/fpd-js/_uploads',
                        uploadsDirURL: this.location.origin + '/_uploads'
                    }
                },
                facebookAppId: '893957135155898',
                instagramClientId: '6748682918479320',
                instagramRedirectUri: 'https://localhost:8080/data/html/instagram_auth.html',
                instagramTokenUri: 'https://radykal.dep/fpd-js/server/php/instagram-token.php',
                customImageParameters: {
                    price: 10,
                    maxSize: 1,
                },
                uploadAgreementModal: false,
                swapProductConfirmation: false,
                pixabayApiKey: '7571591-cf8ff820ec635edeb4e8c6af7',
                 pixabayLang: 'de',
                pixabayHighResImages: false,
                colorPickerPalette: ["#000", "#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc", '#5f27cd', '#222f3e', '#10ac84',"#000", "#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc", '#5f27cd', '#222f3e', '#10ac84',"#000", "#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc", '#5f27cd', '#222f3e', '#10ac84',"#000", "#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc", '#5f27cd', '#222f3e', '#10ac84'],
                hexNames: {'000': 'black', ffffff:'white',FFFFFF:'white',990000:'red',cccccc:'grey', "83635c": 'Chestnut', f4cccc: 'Redder'},
                elementParameters: {
                    patterns: ['images/patterns/carbon.png', 'images/patterns/grune_2.png', 'images/patterns/grunge_1.png', 'images/patterns/lines_green.png', 'images/patterns/lines_purple.png', 'images/patterns/lines_red.png', 'images/patterns/wood_1.png', 'images/patterns/wood_2.png', 'images/patterns/wood_3.png', 'images/patterns/carbon.png','images/patterns/carbon.png', 'images/patterns/grune_2.png', 'images/patterns/grunge_1.png', 'images/patterns/lines_green.png', 'images/patterns/lines_purple.png', 'images/patterns/lines_red.png', 'images/patterns/wood_1.png', 'images/patterns/wood_2.png', 'images/patterns/wood_3.png', 'images/patterns/carbon.png']
                },
                canvasHeight: '800px',
                maxCanvasHeight: 0.7
            }
                
            const fpd = new FancyProductDesigner(document.getElementById('fpd-target'), appOptions);
            window.fpd = fpd;
            
            const updateMainLayout = (layout='sidebar') => {
                
                fpd.container.classList.remove('fpd-topbar');
                fpd.container.classList.remove('fpd-sidebar');
                fpd.container.classList.remove('fpd-off-canvas');
                
                fpd.container.classList.add('fpd-'+layout);
                fpd.mainBar.updateContentWrapper();
                
            }
            
            fpd.addEventListener('ready', () => {
                
                document.querySelector('#main-layout')
                .addEventListener('change', (evt) => {
                    updateMainLayout(evt.currentTarget.value);
                })
                
            })
            
            fpd.addEventListener('productAdd', (evt, details) => {
                //console.log(evt.detail);              
            })
            
            const testApiWrapper = document.body.querySelector('#test-api');
            
            testApiWrapper.querySelector('#undo')
            .addEventListener('click', (evt) => {
                console.log(fpd.currentViewInstance.fabricCanvas.historyUndo);
                fpd.currentViewInstance.fabricCanvas.undo();
            })
            
            testApiWrapper.querySelector('#redo')
            .addEventListener('click', (evt) => {
                fpd.currentViewInstance.fabricCanvas.redo();
            })
            
            testApiWrapper.querySelector('#test')
            .addEventListener('click', (evt) => {
                let test = fpd.deselectElement();
                console.log(test);
            })
            
        </script>
    </div>
</body>
</html>